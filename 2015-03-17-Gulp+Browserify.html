<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Gulp+Browserify | ç”Ÿæ´»ğŸ˜æŠ€æœ¯</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="æ›´æ–°2014å¹´ï¼Œ9æœˆ8æ—¥Gulp startåœ¨è¿™ç¯‡æ–‡ç« å†™ä¹‹åç»è¿‡äº†å¾ˆå¤§çš„å‘å±•ã€‚å¯ä¸‹é¢çš„å†…å®¹ä¾æ—§æ˜¯è¿è´¯çš„ï¼Œåªæœ‰å°‘æ•°éƒ¨åˆ†åœ¨ç¬¬ä¸€æ¬¡å†™è¿‡ä¹‹åè¿›è¡Œäº†æ›´æ”¹ã€‚æ¯”å¦‚ï¼š  è‡ªåŠ¨åŠ è½½task é€šè¿‡gulp/configé…ç½®ä»»åŠ¡ ç”¨BrowserSyncæ›¿æ¢LiveReload   å¼€å§‹ å‘¨æœ«ï¼Œæˆ‘å†³å®šä½¿è‡ªå·±æ²‰æµ¸äºGruntå’ŒRequireJsä¸­ï¼Œ   æ¥ç€åˆ°å‘¨ä¸€æ—¶ï¼Œçœ‹åˆ°ä¸€ç¯‡ and just like that Gr">
<meta property="og:type" content="article">
<meta property="og:title" content="Gulp+Browserify">
<meta property="og:url" content="http://zhuxinyong.com/2015-03-17-Gulp+Browserify.html">
<meta property="og:site_name" content="ç”Ÿæ´»ğŸ˜æŠ€æœ¯">
<meta property="og:description" content="æ›´æ–°2014å¹´ï¼Œ9æœˆ8æ—¥Gulp startåœ¨è¿™ç¯‡æ–‡ç« å†™ä¹‹åç»è¿‡äº†å¾ˆå¤§çš„å‘å±•ã€‚å¯ä¸‹é¢çš„å†…å®¹ä¾æ—§æ˜¯è¿è´¯çš„ï¼Œåªæœ‰å°‘æ•°éƒ¨åˆ†åœ¨ç¬¬ä¸€æ¬¡å†™è¿‡ä¹‹åè¿›è¡Œäº†æ›´æ”¹ã€‚æ¯”å¦‚ï¼š  è‡ªåŠ¨åŠ è½½task é€šè¿‡gulp/configé…ç½®ä»»åŠ¡ ç”¨BrowserSyncæ›¿æ¢LiveReload   å¼€å§‹ å‘¨æœ«ï¼Œæˆ‘å†³å®šä½¿è‡ªå·±æ²‰æµ¸äºGruntå’ŒRequireJsä¸­ï¼Œ   æ¥ç€åˆ°å‘¨ä¸€æ—¶ï¼Œçœ‹åˆ°ä¸€ç¯‡ and just like that Gr">
<meta property="og:locale" content="Chinese">
<meta property="og:image" content="http://zhuxinyong.com/assets/images/gulp-struct.png">
<meta property="og:updated_time" content="2018-05-28T02:47:23.879Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Gulp+Browserify">
<meta name="twitter:description" content="æ›´æ–°2014å¹´ï¼Œ9æœˆ8æ—¥Gulp startåœ¨è¿™ç¯‡æ–‡ç« å†™ä¹‹åç»è¿‡äº†å¾ˆå¤§çš„å‘å±•ã€‚å¯ä¸‹é¢çš„å†…å®¹ä¾æ—§æ˜¯è¿è´¯çš„ï¼Œåªæœ‰å°‘æ•°éƒ¨åˆ†åœ¨ç¬¬ä¸€æ¬¡å†™è¿‡ä¹‹åè¿›è¡Œäº†æ›´æ”¹ã€‚æ¯”å¦‚ï¼š  è‡ªåŠ¨åŠ è½½task é€šè¿‡gulp/configé…ç½®ä»»åŠ¡ ç”¨BrowserSyncæ›¿æ¢LiveReload   å¼€å§‹ å‘¨æœ«ï¼Œæˆ‘å†³å®šä½¿è‡ªå·±æ²‰æµ¸äºGruntå’ŒRequireJsä¸­ï¼Œ   æ¥ç€åˆ°å‘¨ä¸€æ—¶ï¼Œçœ‹åˆ°ä¸€ç¯‡ and just like that Gr">
<meta name="twitter:image" content="http://zhuxinyong.com/assets/images/gulp-struct.png">
  
    <link rel="alternate" href="/atom.xml" title="ç”Ÿæ´»ğŸ˜æŠ€æœ¯" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    
    <div id="header-inner" class="inner">
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="æœç´¢"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://zhuxinyong.com"></form>
      </div>
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">é¦–é¡µ</a>
        
          <a class="main-nav-link" href="/archives">å½’æ¡£</a>
        
          <a class="main-nav-link" href="/about">å…³äº</a>
        
      </nav>
      
    </div>
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ç”Ÿæ´»ğŸ˜æŠ€æœ¯</a>
      </h1>
      
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Gulp+Browserify" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015-03-17-Gulp+Browserify.html" class="article-date">
  <time datetime="2015-03-17T15:18:33.000Z" itemprop="datePublished">Mar 17 2015</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Gulp+Browserify
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Table of Contents -->
        
        <blockquote>
<p>æ›´æ–°<br>2014å¹´ï¼Œ9æœˆ8æ—¥<br><a href="https://github.com/greypants/gulp-starter" target="_blank" rel="noopener">Gulp start</a>åœ¨è¿™ç¯‡æ–‡ç« å†™ä¹‹åç»è¿‡äº†å¾ˆå¤§çš„å‘å±•ã€‚å¯ä¸‹é¢çš„å†…å®¹ä¾æ—§æ˜¯è¿è´¯çš„ï¼Œåªæœ‰å°‘æ•°éƒ¨åˆ†åœ¨ç¬¬ä¸€æ¬¡å†™è¿‡ä¹‹åè¿›è¡Œäº†æ›´æ”¹ã€‚æ¯”å¦‚ï¼š</p>
<ul>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/gulpfile.js#L17" target="_blank" rel="noopener">è‡ªåŠ¨åŠ è½½task</a></li>
<li>é€šè¿‡<a href="https://github.com/greypants/gulp-starter/blob/master/gulp/config.js" target="_blank" rel="noopener">gulp/config</a>é…ç½®ä»»åŠ¡</li>
<li>ç”¨BrowserSyncæ›¿æ¢LiveReload</li>
</ul>
</blockquote>
<p><strong>å¼€å§‹</strong></p>
<p>å‘¨æœ«ï¼Œæˆ‘å†³å®šä½¿è‡ªå·±æ²‰æµ¸äºGruntå’ŒRequireJsä¸­ï¼Œ   æ¥ç€åˆ°å‘¨ä¸€æ—¶ï¼Œçœ‹åˆ°ä¸€ç¯‡ <a href="http://www.100percentjs.com/just-like-grunt-gulp-browserify-now/" target="_blank" rel="noopener">and just like that Grunt and RequireJS are out, itâ€™s all about Gulp and Browserify now.</a>æ•´ä¸ªäººéƒ½ä¸å¥½äº†ï¼</p>
<p>ä¸ºäº†è®©ä½ é¿å…googlingï¼Œæ–‡æ¡£ä¸­é¨æ¸¸ä»¥åŠæˆ‘ç¢°åˆ°çš„é—®é¢˜ï¼Œæˆ‘æœé›†äº†ä¸€äº›è®¤ä¸ºå¯¹ä½ å¼€å§‹æœ‰ç”¨çš„èµ„æºå’Œä¿¡æ¯</p>
<p><strong>Gulp + Browserify starter repo</strong></p>
<p>æˆ‘å·²ç»åˆ›å»ºäº†<a href="https://github.com/greypants/gulp-starter" target="_blank" rel="noopener">Gulp + Browserify starter repo</a>å¹¶é…æœ‰å¦‚ä½•å®Œæˆä¸€äº›å¸¸è§„ä»»åŠ¡å’Œå·¥ä½œæµçš„ä¾‹å­ã€‚</p>
<a id="more"></a>
<ul>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/package.json#L15" target="_blank" rel="noopener">Compile CoffeeScript</a>(å¸¦æœ‰<a href="https://github.com/greypants/gulp-starter/blob/master/gulp/tasks/browserify.js#L13" target="_blank" rel="noopener">source map</a>)</li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/package.json#L16" target="_blank" rel="noopener">Compile Handlebars Templates</a></li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/gulp/tasks/compass.js#L8" target="_blank" rel="noopener">Compile SASS with Compass</a></li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/gulp/tasks/compass.js#L17" target="_blank" rel="noopener">LiveReload</a></li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/package.json#L19" target="_blank" rel="noopener">Browserify-shim: require non-CommonJS code, with dependencies</a></li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/package.json#L10" target="_blank" rel="noopener">Set up module aliases</a></li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/gulp/tasks/serve.js" target="_blank" rel="noopener">Run a static Node server (with logging)</a></li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/gulp/tasks/open.js" target="_blank" rel="noopener">Pop open your app in a Browser</a></li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/gulp/util/handleErrors.js" target="_blank" rel="noopener">Report Errors through Notification Center</a></li>
<li><a href="https://github.com/greypants/gulp-starter/blob/master/gulp/tasks/images.js#L11" target="_blank" rel="noopener">Image processing</a></li>
</ul>
<p><strong><a href="https://github.com/greypants/gulp-starter/wiki" target="_blank" rel="noopener">å¸¸è§é—®é¢˜é›†åˆ</a></strong></p>
<p><a href="http://nodejs.org/" target="_blank" rel="noopener">Node</a>,<a href="https://www.npmjs.org/" target="_blank" rel="noopener">npm</a>,<a href="http://wiki.commonjs.org/wiki/Modules/1.1" target="_blank" rel="noopener">CommonJS</a>,<a href="https://www.npmjs.org/doc/json.html" target="_blank" rel="noopener">package.json</a>â€¦æ˜¯ä»€ä¹ˆï¼Ÿå½“æˆ‘ä¸€å¤´æ‰è¿›è¿™äº›å†…å®¹æ—¶ï¼Œå¤šæ•°æ–‡æ¡£ä¸å¤Ÿè¯¦å°½ï¼Œéƒ½å‡è®¾ç”¨æˆ·å¯¹å…¶æœ‰äº›äº†è§£çš„æƒ…å†µä¸‹ç¼–å†™çš„æ–‡æ¡£ã€‚æˆ‘å·²ç»å°†ä¸€äº›èƒŒæ™¯çŸ¥è¯†èå…¥åˆ°Wikiä¸­ï¼Œä»¥æ­¤æ¶ˆé™¤æˆ‘ä¸Šé¢æåˆ°çš„Repoçš„çŸ¥è¯†éš”é˜‚ã€‚</p>
<ul>
<li><a href="https://github.com/greypants/gulp-starter/wiki/What-is-a-Module%3F" target="_blank" rel="noopener">What is a Module?</a></li>
<li><a href="https://github.com/greypants/gulp-starter/wiki/What-is-Node%3F" target="_blank" rel="noopener">What is Node?</a></li>
<li><a href="https://github.com/greypants/gulp-starter/wiki/What-is-npm%3F" target="_blank" rel="noopener">What is npm?</a></li>
<li><a href="https://github.com/greypants/gulp-starter/wiki/What-is-package.json%3F" target="_blank" rel="noopener">What is package.json?</a></li>
<li><a href="https://github.com/greypants/gulp-starter/wiki/What-is-Browserify%3F" target="_blank" rel="noopener">What is Browserify?</a></li>
<li><a href="https://github.com/greypants/gulp-starter/wiki/What-is-Gulp%3F" target="_blank" rel="noopener">What is Gulp?</a></li>
</ul>
<p><strong>ä¸ºä½•Gulpå¾ˆå¥½ï¼Ÿ</strong></p>
<p><strong>å®ƒæ˜¯æœ‰æ„ä¹‰çš„ã€‚</strong></p>
<p>åœ¨å­¦äº†Gruntå‡ å¤©åæˆ‘å°±å­¦ä¹ äº†Gulpï¼Œæ— è®ºä»€ä¹ˆåŸå› ï¼Œæˆ‘å‘ç°å®ƒå¾ˆå®¹æ˜“æŒæ¡å¹¶ä¸”å·¥ä½œèµ·æ¥å¾ˆäº«å—ã€‚é€šè¿‡ä¸åŒçš„è¿‡ç¨‹è¾“å‡ºæ–‡ä»¶æµçš„æƒ³æ³•å¾ˆæœ‰èµã€‚</p>
<blockquote>
<p>gulpâ€™s use of streams and code-over-configuration makes for a simpler and more intuitive build. - gulpjs.com</p>
</blockquote>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå›¾ç‰‡å¤„ç†çš„è¿‡ç¨‹ï¼š</p>
<pre><code>var gulp       = require(&apos;gulp&apos;);
var imagemin   = require(&apos;gulp-imagemin&apos;);

gulp.task(&apos;images&apos;, function(){
    return gulp.src(&apos;./src/images/**&apos;)
        .pipe(imagemin())
        .pipe(gulp.dest(&apos;./build/images&apos;));
});
</code></pre><p>é¦–å…ˆï¼Œ<code>gulp.src</code>å®šä½åˆ°èµ„æºæ–‡ä»¶ç”¨äºæ¥ä¸‹æ¥çš„å„ç§ä»»åŠ¡ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä½¿æ–‡ä»¶ç»è¿‡<code>gulp-imagemin</code>ï¼Œç„¶åé€šè¿‡<code>gulp.dest()</code>è¾“å‡ºåˆ°æˆ‘çš„<code>build</code>ç›®å½•ã€‚è‹¥æƒ³æ·»åŠ é¢å¤–çš„æ“ä½œï¼ˆé‡å‘½åï¼Œæ”¹å˜å°ºå¯¸ï¼Œè‡ªåŠ¨åŠ è½½ç­‰ï¼‰ï¼Œåªéœ€è¦åœ¨ä»»åŠ¡æµä¸­åŠ è½½æ›´å¤šçš„ç®¡é“ã€‚</p>
<p><strong>é€Ÿåº¦</strong></p>
<p>Gulpæ˜¯ç›¸å½“çš„å¿«ï¼Œæˆ‘åˆšåˆšå®Œæˆäº†ä¸€ä¸ªç›¸å½“å¤æ‚çš„appï¼Œå®ƒç¼–è¯‘Sassï¼ŒSourceMapçš„CoffeeScriptï¼ŒHandlebarsçš„æ¨¡æ¿ä»¥åŠè‡ªåŠ¨åŠ è½½ã€‚è¿™äº›çœ‹èµ·æ¥è²Œä¼¼éƒ½ä¸æ˜¯é—®é¢˜ã€‚</p>
<blockquote>
<p>By harnessing the power of nodeâ€™s streams you get fast builds that donâ€™t write intermediary files to disk. - gulpjs.com</p>
</blockquote>
<p><strong>æ‰“æ•£ä»»åŠ¡é…ç½®æ–‡ä»¶</strong></p>
<p>gulpfileå°±æ˜¯åœ¨ä½¿ç”¨gulpæ—¶çš„ä»»åŠ¡é…ç½®ï¼Œå¦‚æœä½ ä½¿ç”¨è¿‡gruntï¼Œå®ƒå°±åƒgruntfileã€‚åœ¨ç»å†ä¸€äº›å®éªŒï¼Œæ”¶åˆ°ä¸€äº›æäº¤å»ºè®®å’Œå­¦ä¹ Node/CommonJSå¤šæ£’ä¹‹åï¼Œæˆ‘æ‹†åˆ†äº†æ‰€æœ‰çš„ä»»åŠ¡åˆ°å•ä¸ªæ–‡ä»¶ä¸­ï¼Œç„¶åé€šè¿‡gulpfile.jsç»„åˆèµ·æ¥ã€‚</p>
<pre><code>var gulp = require(&apos;./gulp&apos;)([
    &apos;browserify&apos;,
    &apos;compass&apos;,
    &apos;images&apos;,
    &apos;open&apos;,
    &apos;watch&apos;,
    &apos;serve&apos;
]);

gulp.task(&apos;build&apos;, [&apos;browserify&apos;, &apos;compass&apos;, &apos;images&apos;]);
gulp.task(&apos;default&apos;, [&apos;build&apos;, &apos;watch&apos;, &apos;serve&apos;, &apos;open&apos;]);
</code></pre><p>200ä¸ªå­—ç¬¦ï¼Œå¾ˆç®€æ´ï¼Œå¯¹å§ï¼Ÿè¿™é‡Œå‘ç”Ÿäº†ä»€ä¹ˆï¼šæˆ‘å¼•å…¥äº†åœ¨<code>./gulp/index.js</code>ä¸­åˆ›å»ºçš„gulpæ¨¡å—ï¼Œç„¶åä»¥ä¸€ä¸ªåˆ—è¡¨çš„å½¢å¼å°†åœ¨<code>./gulp/tasks</code>æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºçš„ä»»åŠ¡æ–‡ä»¶ã€‚</p>
<pre><code>var gulp = require(&apos;gulp&apos;);

module.exports = function(tasks) {
    tasks.forEach(function(name) {
        gulp.task(name, require(&apos;./tasks/&apos; + name));
    });

    return gulp;
};
</code></pre><p>æˆ‘ä»¬ä¼ ç»™è¿™ä¸ªæ–¹æ³•çš„æ¯ä¸€ä¸ªä»»åŠ¡åï¼Œéƒ½æ˜¯åœ¨<code>.ï¼tasksï¼</code>æ–‡ä»¶å¤¹ä¸‹çš„ç‹¬ç«‹æ–‡ä»¶æš´éœ²å‡ºçš„æ–¹æ³•ã€‚ç°åœ¨æ¯ä¸€ä¸ªä»»åŠ¡éƒ½è¢«æ³¨å†Œï¼Œå¯ä»¥åœ¨ä¸€ä¸ªå¤§ä»»åŠ¡é‡Œé¢ä½¿ç”¨ï¼Œä¾‹å¦‚åƒå®šä¹‰åœ¨gulpfileå°¾éƒ¨çš„defaultã€‚</p>
<p><img src="/assets/images/gulp-struct.png" alt="img"></p>
<p>è¿™æ ·å°±å¯ä»¥é‡ç”¨è€Œä¸”åœ¨æ–°é¡¹ç›®ä¸­å¾ˆå®¹æ˜“å»ºç«‹ï¼Œé˜…è¯»<a href="https://github.com/gulpjs/gulp/blob/master/docs/README.md" target="_blank" rel="noopener">gulp doc</a>è·å¾—æ›´å¤šçŸ¥è¯†ã€‚</p>
<p><strong>ä¸ºä½•Browserifyå¾ˆå¥½ï¼Ÿ</strong></p>
<blockquote>
<p>â€œBrowserify lets you require(â€˜modulesâ€™) in the browser by bundling up all of your dependencies.â€ - Browserify.org</p>
</blockquote>
<p>Browserifyå°±åƒä¸€ä¸ªå•ç‹¬çš„æ–‡ä»¶ï¼Œéµå®ˆrequireä¾èµ–åŸç†åŒæ—¶æŠŠä»–ä»¬åˆå¹¶ä¸ºä¸€ä¸ªæ–°æ–‡ä»¶ï¼Œä½ å¯ä»¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨æˆ–è€…é€šè¿‡Nodeä¸­çš„APIåœ¨gulpä¸­è°ƒç”¨ã€‚</p>
<p><strong>åŸºç¡€çš„APIä¾‹å­</strong></p>
<p><strong>app.js</strong></p>
<pre><code>var hideElement = require(&apos;./hideElement&apos;);

hideElement(&apos;#some-id&apos;);
</code></pre><p><strong>hideElement.js</strong></p>
<pre><code>var $ = require(&apos;jquery&apos;);
module.exports = function(selector) {
    return $(selector).hide();
};
</code></pre><p><strong>gulpfile.js</strong></p>
<pre><code>var browserify = require(&apos;browserify&apos;);
var bundle = browserify(&apos;./app.js&apos;).bundle()
</code></pre><p>é€šè¿‡Browserifyè°ƒç”¨app.jsç»å†å¦‚ä¸‹è¿‡ç¨‹ï¼š</p>
<ol>
<li>app.js ä¾èµ– hideElement.js</li>
<li>hideElement.jséœ€è¦jquery.jsæ¨¡å—</li>
<li>æŠŠjQueryï¼ŒhideElement.js,app.jsæ†ç»‘åœ¨ä¸€èµ·ï¼Œåœ¨ä½¿ç”¨ä¹‹å‰ç¡®ä¿æ²¡æœ‰ä¾èµ–çš„æ–‡ä»¶éƒ½å­˜åœ¨</li>
</ol>
<p>###CommonJsåˆ°AMD###</p>
<p>æˆ‘ä»¬çš„å›¢é˜Ÿå·²ç»å¼€å§‹ä»¥Require.jså’ŒAlmond.jsçš„æ¨¡å—åŒ–å¼€å‘ï¼Œä»–ä¿©å…¶å®æ˜¯å®ç°äº†AMDè§„èŒƒã€‚æˆ‘ä»¬å–œæ¬¢è¿™æ ·ç»„ç»‡ä»£ç å¹¶ä»ä¸­è·ç›Šï¼Œå¯æ˜¯â€¦</p>
<p><strong>AMDå’ŒRequire.jsæ„Ÿè§‰å¾ˆç¬¨é‡å’Œä¸ä¾¿</strong></p>
<pre><code>require([
    &apos;./thing1&apos;,
    &apos;./thing2&apos;,
    &apos;./thing3&apos;
], function(thing1, thing2, thing3) {
    // Tell the module what to return/export
    return function() {
        console.log(thing1, thing2, thing3);
    };
});
</code></pre><p><strong>ç¬¬ä¸€æ¬¡ä½¿ç”¨CommonJsæ¨¡å—çš„æ—¶å€™æ„Ÿè§‰å¾ˆè‡ªç„¶</strong></p>
<pre><code>ar thing1 = require(&apos;./thing1&apos;);
var thing2 = require(&apos;./thing2&apos;);
var thing3 = require(&apos;./thing3&apos;);

// Tell the module what to return/export
module.exports = function() {
    console.log(thing1, thing2, thing3);
};
</code></pre><p>ç¡®ä¿é˜…è¯»<a href="http://nodejs.org/api/modules.html#modules_file_modules" target="_blank" rel="noopener"> how require calls resolve to files, folders, and node_modules</a></p>
<p>###Browserifyå¾ˆæ£’æ˜¯å› ä¸ºNodeå’ŒNPMå¾ˆæ£’###</p>
<p>Nodeä½¿ç”¨CommonJsæ¨¡å¼æ¥æä¾›æ¨¡å—ç®¡ç†ï¼ŒçœŸæ­£ä½¿å…¶å¼ºå¤§çš„æ˜¯é€šè¿‡NPMå¯ä»¥å¿«é€Ÿå®‰è£…ï¼Œæ›´æ–°å’Œç®¡ç†ä¾èµ–ã€‚ä½ ä¸€æ—¦å°è¯•è¿‡æ­¤ç§ç»„åˆï¼Œä½ å°†ä¼šä¸€ç›´éœ€è¦å®ƒã€‚Browerifyå°±æ˜¯æŠŠè¿™ç§æ¨¡å¼å¸¦åˆ°æµè§ˆå™¨ç«¯ã€‚</p>
<p>è‹¥éœ€è¦jQueryï¼Œä¸€èˆ¬æƒ…å†µï¼Œä½ ä¼šæ‰“å¼€æµè§ˆå™¨åœ¨jQuery.comä¸Šæ‰¾åˆ°æœ€æ–°çš„ç‰ˆæœ¬çš„ï¼Œç„¶åä¸‹è½½åˆ°ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼Œç„¶ååœ¨ä½ çš„å¸ƒå±€é‡Œæ·»åŠ scriptæ ‡ç­¾ï¼ŒåŒæ—¶ä½¿å…¶é™„åŠ åˆ°windowå¯¹è±¡ä¸Šä½œä¸ºå…¨å±€å¯¹è±¡ã€‚</p>
<p>é€šè¿‡NPMå’ŒBrowserifyï¼Œä½ åªéœ€è¦ï¼š</p>
<pre><code>npm install jquery --save
</code></pre><p>app.js</p>
<pre><code>var $ = require(&apos;jquery&apos;);
$(&apos;.haters&apos;).fadeOut();
</code></pre><p>è¿™äº›ä»£ç è¡¨ç¤ºä»NPMä¸‹è½½æœ€æ–°çš„jQueryç‰ˆæœ¬ï¼Œå¹¶ä¿å­˜åˆ°ä½ é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„node_modulesæ–‡ä»¶å¤¹ä¸­ã€‚<code>--save</code>å‚æ•°ä»£è¡¨åœ¨package.jsonä¸­çš„dependenciesæ·»åŠ æ­¤åŒ…ã€‚ç°åœ¨ä½ å¯ä»¥åœ¨å½“å‰é¡¹ç›®ä¸‹çš„ä»»ä½•æ–‡ä»¶ä¸­<code>require(&quot;jquery&quot;)</code>ã€‚jQueryå¯¹è±¡é€šè¿‡var $ æš´éœ²åœ¨å±€éƒ¨ä½œç”¨åŸŸå†…ï¼Œè€Œä¸æ˜¯åœ¨windowä¸‹çš„å…¨å±€ä½œç”¨åŸŸã€‚å½“æˆ‘åœ¨ç¬¬ä¸‰æ–¹ç½‘ç«™å¼•å…¥æˆ‘çš„ä»£ç åŒæ—¶è¯¥ç½‘ç«™æœ‰å…¶ä»–ç‰ˆæœ¬çš„jqueryæ—¶ï¼Œè¿™ç§æ¨¡å¼ä¼šå¾ˆå¥½ï¼Œé¿å…ç‰ˆæœ¬å†²çªçš„å¯èƒ½ã€‚</p>
<p>###Transformsçš„èƒ½åŠ›###</p>
<p>åœ¨æ‰“åŒ…Jsæ–‡ä»¶ä¹‹å‰ï¼ŒBrowserifyé€šè¿‡ä¸€äº›<a href="https://github.com/substack/node-browserify/wiki/list-of-transforms" target="_blank" rel="noopener">transform</a>å¯ä»¥å¾ˆè½»æ¾çš„é¢„å¤„ç†ä½ çš„æ–‡ä»¶ç„¶åæ‰“åŒ…åˆ°ä¸€ä¸ªæ–‡ä»¶é‡Œã€‚å°±æ˜¯ç¼–è¯‘.coffeeæˆ–.hbsæ–‡ä»¶åˆ°åˆå¹¶çš„æ–‡ä»¶é‡Œã€‚</p>
<p>å¸¸è§„çš„åšæ³•æ˜¯åœ¨package.jsonçš„<code>browserify.transform</code>ä¸‹åˆ—å‡ºä½ çš„transformsã€‚Browserifyä¼šæŒ‰ç…§ä½ åˆ—çš„é¡ºåºæ‰§è¡Œã€‚è¿™éƒ½å‡è®¾å·²ç»é€šè¿‡npm install å®‰è£…äº†å®ƒä»¬ã€‚</p>
<pre><code>&quot;browserify&quot;: {
    &quot;transform&quot;: [&quot;coffeeify&quot;, &quot;hbsfy&quot; ]
  },
 &quot;devDependencies&quot;: {
    &quot;browserify&quot;: &quot;~3.36.0&quot;,
    &quot;coffeeify&quot;: &quot;~0.6.0&quot;,
    &quot;hbsfy&quot;: &quot;~1.3.2&quot;,
    &quot;gulp&quot;: &quot;~3.6.0&quot;,
    &quot;vinyl-source-stream&quot;: &quot;~0.1.1&quot;
  }
</code></pre><p>æ³¨æ„ï¼šå› ä¸ºtransformsåªåœ¨é¢„å¤„ç†ä¸­ä½¿ç”¨å¹¶ä¸”ä¸éœ€è¦åœ¨è¾“å‡ºJSä¸­ä½¿ç”¨æ‰€ä»¥æˆ‘åœ¨<code>devDependencies</code>ä¸­åˆ—å‡ºäº†å®ƒä»¬ã€‚ä½ å¯ä»¥ä½¿ç”¨<code>--save-dev</code>æˆ–<code>-D</code>è‡ªåŠ¨æ·»åŠ åˆ°<code>devDependencies</code>ä¸­ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>require(&#39;./view.coffee&#39;)</code>å’Œ<code>require(&#39;./template.hbs&#39;)</code>å°±åƒä½¿ç”¨å…¶ä»–JSæ–‡ä»¶ä¸€æ ·ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨<code>extentions</code>é€‰é¡¹æ¥ä½¿Browserifyè¾¨è®¤å‡ºæ‰©å±•ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸éœ€è¦åœ¨requireä¸­æŒ‡æ˜åç¼€ã€‚</p>
<pre><code>browserify({
    entries: [&apos;./src/javascript/app.coffee&apos;],
    extensions: [&apos;.coffee&apos;, &apos;.hbs&apos;]
})
.bundle()
...
</code></pre><p>åœ¨è¿™é‡Œçœ‹<a href="https://github.com/greypants/gulp-starter/blob/master/gulp/tasks/browserify.js" target="_blank" rel="noopener">äº‹ä¾‹</a></p>
<p>###åŒæ—¶ä½¿ç”¨Gulpå’ŒBrowserify###</p>
<p>èµ·åˆï¼Œæˆ‘ä½¿ç”¨<code>gulp-browserify</code>æ’ä»¶ï¼Œä½†æ˜¯å‡ ç¤¼æ‹œä¹‹åå‘ç°GulpæŠŠå®ƒåŠ å…¥é»‘åå•äº†ï¼ŒåŸæ¥æ’ä»¶ä¸æ˜¯å¿…é¡»çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨node-browserify API,å€ŸåŠ©<a href="https://www.npmjs.org/package/vinyl-source-stream" target="_blank" rel="noopener">vinyl-source-stream</a>ï¼Œå¯ä»¥ä½¿åˆå¹¶çš„æ–‡ä»¶å˜ä¸ºgulpéœ€è¦çš„æµã€‚ç›´æ¥ä½¿ç”¨Browserifyå¯ä»¥100%è·å¾—æœ€æ–°ç‰ˆæœ¬çš„ç‰¹æ€§ã€‚</p>
<p><strong>åŸºç¡€æ–¹æ³•</strong></p>
<pre><code>var browserify = require(&apos;browserify&apos;);
var gulp = require(&apos;gulp&apos;);
var source = require(&apos;vinyl-source-stream&apos;);

gulp.task(&apos;browserify&apos;, function() {
    return browserify(&apos;./src/javascript/app.js&apos;)
        .bundle()
        //Pass desired output filename to vinyl-source-stream
        .pipe(source(&apos;bundle.js&apos;))
        // Start piping stream to tasks!
        .pipe(gulp.dest(&apos;./build/&apos;));
});
</code></pre><p><strong>é«˜çº§ç”¨æ³•</strong></p>
<p>æŸ¥çœ‹ä¸€ä¸‹<a href="https://github.com/greypants/gulp-starter/blob/master/gulp/tasks/browserify.js" target="_blank" rel="noopener">browserify.js task</a>å’Œ<a href="https://github.com/greypants/gulp-starter/blob/master/package.json" target="_blank" rel="noopener">package.json</a>ä¸­æ˜¯å¦‚ä½•ä¸ºCoffeeScriptå’ŒHandlebarsé¢„ç¼–è¯‘çš„ã€‚é€šè¿‡<a href="https://github.com/thlorenz/browserify-shim" target="_blank" rel="noopener">browserify-shim</a>jåˆ›å»ºæ²¡æœ‰å…±åŒçš„JSæ¨¡å—åŒæ—¶ä½¿ç”¨æ¶ˆæ¯ä¸­å¿ƒæ¥å¤„ç†ç¼–è¯‘é”™è¯¯ã€‚é˜…è¯»è¿™äº›<a href="https://github.com/substack/node-browserify#api-example" target="_blank" rel="noopener">API</a>æ¥äº†è§£Browserifyèƒ½åšçš„ä¸œè¥¿ã€‚</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://zhuxinyong.com/2015-03-17-Gulp+Browserify.html" data-id="cjhpotil4002998g9itmzgstc" class="article-share-link">åˆ†äº«</a>
      
      
      
    </footer>
  </div>
  
    
 <script src="/jquery/jquery.min.js"></script>
  <div id="random_posts">
    <h2>æ¨èæ–‡ç« </h2>
    <div class="random_posts_ul">
      <script>
          var random_count =4
          var site = {BASE_URI:'/'};
          function load_random_posts(obj) {
              var arr=site.posts;
              if (!obj) return;
              // var count = $(obj).attr('data-count') || 6;
              for (var i, tmp, n = arr.length; n; i = Math.floor(Math.random() * n), tmp = arr[--n], arr[n] = arr[i], arr[i] = tmp);
              arr = arr.slice(0, random_count);
              var html = '<ul>';
            
              for(var j=0;j<arr.length;j++){
                var item=arr[j];
                html += '<li><strong>' + 
                item.date + ':&nbsp;&nbsp;<a href="' + (site.BASE_URI+item.uri) + '">' + 
                (item.title || item.uri) + '</a></strong>';
                if(item.excerpt){
                  html +='<div class="post-excerpt">'+item.excerpt+'</div>';
                }
                html +='</li>';
                
              }
              $(obj).html(html + '</ul>');
          }
          $('.random_posts_ul').each(function () {
              var c = this;
              if (!site.posts || !site.posts.length){
                  $.getJSON(site.BASE_URI + 'js/posts.js',function(json){site.posts = json;load_random_posts(c)});
              } 
               else{
                load_random_posts(c);
              }
          });
      </script>
    </div>
  </div>

    
<nav id="article-nav">
  
    <a href="/2015-04-08-reload.html" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸Šä¸€ç¯‡</strong>
      <div class="article-nav-title">
        
          reload vs href
        
      </div>
    </a>
  
  
    <a href="/2015-03-12-æ›´å¥½çš„äº‹ä»¶å¤„ç†.html" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">ä¸‹ä¸€ç¯‡</strong>
      <div class="article-nav-title">æ›´å¥½çš„äº‹ä»¶å¤„ç†</div>
    </a>
  
</nav>

  
</article>
 
     
  <div class="comments" id="comments">
    
     
       
      <div id="cloud-tie-wrapper" class="cloud-tie-wrapper"></div>
    
       
      
      
  </div>
 
  

</section>
           
    <aside id="sidebar">
  
    

  
    
  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title recent-posts">æœ€æ–°æ–‡ç« </h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2018-05-28-ä¸€ä¸ªæ•°å­—æˆªå–å¼•å‘çš„ç²¾åº¦é—®é¢˜ï¼ˆå››ï¼‰.html">ä¸€ä¸ªæ•°å­—æˆªå–å¼•å‘çš„ç²¾åº¦é—®é¢˜ï¼ˆå››ï¼‰</a>
          </li>
        
          <li>
            <a href="/2017-07-08-sass-vs-less.html">sass vs less</a>
          </li>
        
          <li>
            <a href="/2017-06-11-å…¨æ ˆå·¥ç¨‹å¸ˆæŒ‡å—.html">å…¨æ ˆå·¥ç¨‹å¸ˆæŒ‡å—</a>
          </li>
        
          <li>
            <a href="/2017-06-03-ä½¿åŒäº‹ç¾¡æ…•ä¸å·²çš„8ä¸ªnpmå‘½ä»¤.html">ä½¿åŒäº‹ç¾¡æ…•ä¸å·²çš„8ä¸ªnpmå‘½ä»¤</a>
          </li>
        
          <li>
            <a href="/2017-05-18-å¾®ä¿¡æ›´æ–°äº†è¿™äº›å†…å®¹ï¼Œä½ è¿˜ä¸çŸ¥é“ï¼Ÿ.html">å¾®ä¿¡æ›´æ–°äº†è¿™äº›å†…å®¹ï¼Œä½ è¿˜ä¸çŸ¥é“ï¼Ÿ</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  
    <!--å¾®ä¿¡å…¬ä¼—å·äºŒç»´ç -->


  
</aside>

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-left">
      &copy; 2014 - 2018 Zhuxy&nbsp;|&nbsp;
      ä¸»é¢˜ <a href="https://github.com/giscafer/hexo-theme-cafe/" target="_blank">Cafe</a>
    </div>
     <div id="footer-right">
      è”ç³»æ–¹å¼&nbsp;|&nbsp;aotuwangren@163.com
    </div>
  </div>
</footer>
 <script src="/jquery/jquery.min.js"></script>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">é¦–é¡µ</a>
  
    <a href="/archives" class="mobile-nav-link">å½’æ¡£</a>
  
    <a href="/about" class="mobile-nav-link">å…³äº</a>
  
</nav>
    <img class="back-to-top-btn" src="/images/fly-to-top.png"/>
<script>
// Elevator script included on the page, already.
window.onload = function() {
  var elevator = new Elevator({
    selector:'.back-to-top-btn',
    element: document.querySelector('.back-to-top-btn'),
    duration: 1000 // milliseconds
  });
}
</script>
      

  
    <script>
      var cloudTieConfig = {
        url: document.location.href, 
        sourceId: "",
        productKey: "e2fb4051c49842688ce669e634bc983f",
        target: "cloud-tie-wrapper"
      };
    </script>
    <script src="https://img1.ws.126.net/f2e/tie/yun/sdk/loader.js"></script>
    

  







<!-- author:forvoid begin -->
<!-- author:forvoid begin -->

<!-- author:forvoid end -->

<!-- author:forvoid end -->


  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      })
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      })
    </script>
    <script type="text/javascript" src="https://cdn.rawgit.com/mathjax/MathJax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  


 <script src="/js/is.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>
<script src="/js/elevator.js"></script>
  </div>
</body>
</html>